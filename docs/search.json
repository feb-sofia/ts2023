[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Introduction to Time Series Analysis 2023/2024",
    "section": "",
    "text": "General Information"
  },
  {
    "objectID": "index.html#setup",
    "href": "index.html#setup",
    "title": "Introduction to Time Series Analysis",
    "section": "Setup",
    "text": "Setup\nThe exercise classes require a minimal software setup:\n\nOpen https://cran.r-project.org/, and you will find links to R builds for different operating systems. Click on the link matching your operating system and choose the latest version of R. When using the Windows operating system, you will see a link “Install R for the first time”. Click on this link and then download the R installer. Run the installer and accept the default settings.\nAfter installing R, open https://posit.co/download/rstudio-desktop/. If the web page recognizes your operating system, you will see a download button (right side of the page) for R studio. If the button does not appear, scroll down the page and find the installer appropriate for your operating system.\nOpen R Studio on your computer and create a new Quarto document. Find the file drop-down menu on the top-left part of the interface, select “New file,” then find “Quarto document” and click on it. R Studio may ask you to allow the installation of additional packages.\nIn the exercise classes, we will use many functions from the tidyverse system and several other packages. Before accessing the functionality these packages provide, you need to install them first. Find the R console in R studio and paste the following line on the command line. Press enter to run it and wait for the installation to complete.\n\n\ninstall.packages(c(\"tidyverse\", \"xts\", \"forecast\", \"quantmod\"))\n\nOptional: more on Quarto: https://quarto.org/docs/guide/\nOptional: a base R cheatsheet: https://www.datacamp.com/cheat-sheet/getting-started-r"
  },
  {
    "objectID": "index.html#grading",
    "href": "index.html#grading",
    "title": "Introduction to Time Series Analysis 2023/2024",
    "section": "Grading",
    "text": "Grading\nThe course consists of two parts: lectures and exercise classes. Your final grade will be the average of the grades of these two parts. To obtain a grade for the exercise classes, you need to complete a homework project at the end of the semester—details to be announced."
  },
  {
    "objectID": "index.html#recommended-reading",
    "href": "index.html#recommended-reading",
    "title": "Introduction to Time Series Analysis 2023/2024",
    "section": "Recommended Reading",
    "text": "Recommended Reading\n\nKirchgässner, Wolters, and Hassler (2013)\nCowpertwait and Metcalfe (2009)\n\n\n\n\n\nCowpertwait, Paul S. P., and Andrew V. Metcalfe. 2009. Introductory Time Series with R. Use R! Dordrecht Heidelberg: Springer. https://doi.org/10.1007/978-0-387-88698-5.\n\n\nKirchgässner, Gebhard, Jürgen Wolters, and Uwe Hassler. 2013. Introduction to Modern Time Series Analysis. 2. ed. Springer Texts in Business and Economics. Berlin Heidelberg: Springer."
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Cowpertwait, Paul S. P., and Andrew V. Metcalfe. 2009. Introductory\nTime Series with R. Use R!\nDordrecht Heidelberg: Springer. https://doi.org/10.1007/978-0-387-88698-5.\n\n\nKirchgässner, Gebhard, Jürgen Wolters, and Uwe Hassler. 2013.\nIntroduction to Modern Time Series Analysis. 2. ed. Springer\nTexts in Business and Economics. Berlin Heidelberg:\nSpringer."
  },
  {
    "objectID": "index.html#software-setup",
    "href": "index.html#software-setup",
    "title": "Introduction to Time Series Analysis 2023/2024",
    "section": "Software Setup",
    "text": "Software Setup\nThe exercise classes require a minimal software setup:\n\nOpen https://cran.r-project.org/, and you will find links to R builds for different operating systems. Click on the link matching your operating system and choose the latest version of R. When using the Windows operating system, you will see a link “Install R for the first time .” Click on this link and then download the R installer. Run the installer and accept the default settings.\nAfter installing R, open https://posit.co/download/rstudio-desktop/. If the web page recognizes your operating system, you will see a download button (right side of the page) for R studio. If the button does not appear, scroll down the page and find the installer appropriate for your operating system.\nShould you encounter difficulties installing R and R Studio, you can watch these video guides:\n\n\nWindows\nMac\nUbuntu 22.04\n\n\nOptionally, you can also download and install git. In case of difficulties, these videos may help.\n\n\nWindows\nMac\nLinux\n\n\nOpen R Studio and open a new project dialog: File -&gt; New Project. In the dialog, click on the third option: version control. From the next menu, select git.\n\n  \nIn the Repository URL field, paste the address of the course repository:\nhttps://github.com/feb-sofia/ts2023.git\n Click on the Create Project button and wait for git R studio to clone the repository and open the project.\n 6. The content of the GitHub repository will be updated continuously throughout the semester. In order to download the new files or updated versions of already existing files, you can use git pull. Open the git window in the upper right pane of R studio and click the pull button. This will download all changes from the GitHub repository to your local copy.\n\n\n\nStep 7\n\n\n\nNote that if you have modified the files tracked by git that have changed in the repository, git pull will fail with an error similar to this one:\n\n\n\n\nPull error\n\n\nTo avoid this, you can roll back the file to its original state. Right-click on the file in the git window and choose “revert.”\n\n\n\nRevert\n\n\n\nIn the exercise classes, we will use many functions from the tidyverse system and several other packages. Before accessing these packages’ functionality, you need to install them first. Find the R console in R studio and paste the following line on the command line. Press enter to run it and wait for the installation to complete.\n\n\ninstall.packages(c(\"tidyverse\", \"tidyverts\", \"xts\", \"quantmod\", \"urca\"))\n\n\n\n\nInstall packages\n\n\nOptional: more on Quarto: https://quarto.org/docs/guide/\nOptional: a base R cheatsheet: https://www.datacamp.com/cheat-sheet/getting-started-r"
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  Introduction",
    "section": "",
    "text": "TODO"
  },
  {
    "objectID": "index.html#schedule",
    "href": "index.html#schedule",
    "title": "Introduction to Time Series Analysis 2023/2024",
    "section": "Schedule",
    "text": "Schedule\n\nTu 12:15-13:45 in room 302\nWe 12:15-13:45 in room 302\nWe 14:15-15:45 in room 308"
  },
  {
    "objectID": "index.html#github-repository",
    "href": "index.html#github-repository",
    "title": "Introduction to Time Series Analysis 2023/2024",
    "section": "GitHub Repository",
    "text": "GitHub Repository\nAll course materials for the exercise classes will be available in the GitHub repository:\nhttps://github.com/feb-sofia/ts2023"
  },
  {
    "objectID": "intro.html#intro",
    "href": "intro.html#intro",
    "title": "1  Introduction",
    "section": "1.1 Intro",
    "text": "1.1 Intro\n\nbikes &lt;- bikes_r %&gt;% \n  mutate(\n    day = as.Date(dteday) \n  ) %&gt;%\n  as_tsibble(\n    index = day\n  )\n\n\nbikes %&gt;%\n  filter_index(\"2011-06\") %&gt;%\n  autoplot(cnt)"
  },
  {
    "objectID": "intro.html#time-series-objects",
    "href": "intro.html#time-series-objects",
    "title": "1  Introduction",
    "section": "1.2 Time series objects",
    "text": "1.2 Time series objects\nThere are several classes that are used for storing time series in R. We will mainly focus on tsibble, but some functions we will encounter later in the course return or require ts or xts objects.\n\nts\nxts (see the xts vignette)\ntsibble (see the introduction to tsibble)\n\n\n1.2.1 Creating ts Objects\n\nts(dt$x, start = 1960, frequency = 12)\n\n          Jan      Feb      Mar      Apr      May      Jun      Jul      Aug\n1960 10.20000 10.40400 10.61208 10.82432 11.04081 11.26162 11.48686 11.71659\n1961 12.93607 13.19479 13.45868 13.72786 14.00241 14.28246 14.56811 14.85947\n          Sep      Oct      Nov      Dec\n1960 11.95093 12.18994 12.43374 12.68242\n1961                                    \n\n\n\nts(dt$x, start = 1960, frequency = 4)\n\n         Qtr1     Qtr2     Qtr3     Qtr4\n1960 10.20000 10.40400 10.61208 10.82432\n1961 11.04081 11.26162 11.48686 11.71659\n1962 11.95093 12.18994 12.43374 12.68242\n1963 12.93607 13.19479 13.45868 13.72786\n1964 14.00241 14.28246 14.56811 14.85947\n\n\n\nts(dt$x, start = 1960, frequency = 1)\n\nTime Series:\nStart = 1960 \nEnd = 1979 \nFrequency = 1 \n [1] 10.20000 10.40400 10.61208 10.82432 11.04081 11.26162 11.48686 11.71659\n [9] 11.95093 12.18994 12.43374 12.68242 12.93607 13.19479 13.45868 13.72786\n[17] 14.00241 14.28246 14.56811 14.85947\n\n\n\n\n1.2.2 Creating xts Objects\nUnlike ts, xts requires an explicit time index in the form of date-like objects:\n\nyearmon (package zoo)\nyearqtr (package zoo)\nDate\nPOSIX\n\n\n# Here, we arbitrarily choose monthly measurements \n# to demonstrate the construction of xts objects\n\n# First, we construct a time index: the months from Feb 1960 to Sep 1961 by using the as.yearmon function. Note that yearmon stores a month as the year plus a fraction\n\nas.yearmon(\"1960-01\")\n\n[1] \"Jan 1960\"\n\nas.yearmon(\"1960-02\")\n\n[1] \"Feb 1960\"\n\nas.yearmon(\"1960-03\")\n\n[1] \"Mar 1960\"\n\nas.yearmon(\"1960-01\") + 1:20 / 12\n\n [1] \"Feb 1960\" \"Mar 1960\" \"Apr 1960\" \"May 1960\" \"Jun 1960\" \"Jul 1960\"\n [7] \"Aug 1960\" \"Sep 1960\" \"Oct 1960\" \"Nov 1960\" \"Dec 1960\" \"Jan 1961\"\n[13] \"Feb 1961\" \"Mar 1961\" \"Apr 1961\" \"May 1961\" \"Jun 1961\" \"Jul 1961\"\n[19] \"Aug 1961\" \"Sep 1961\"\n\ndt &lt;- dt %&gt;%\n  mutate(\n    # n() counts the number of rows in the table,\n    month = as.yearmon(\"1960-01\") + 1:n() / 12\n  )\n\nets_ex &lt;- xts(\n  dt, \n  order.by = dt$month\n)\n\nets_ex\n\n         tidx        x    month\nFeb 1960    1 10.20000 Feb 1960\nMar 1960    2 10.40400 Mar 1960\nApr 1960    3 10.61208 Apr 1960\nMay 1960    4 10.82432 May 1960\nJun 1960    5 11.04081 Jun 1960\nJul 1960    6 11.26162 Jul 1960\nAug 1960    7 11.48686 Aug 1960\nSep 1960    8 11.71659 Sep 1960\nOct 1960    9 11.95093 Oct 1960\nNov 1960   10 12.18994 Nov 1960\nDec 1960   11 12.43374 Dec 1960\nJan 1961   12 12.68242 Jan 1961\nFeb 1961   13 12.93607 Feb 1961\nMar 1961   14 13.19479 Mar 1961\nApr 1961   15 13.45868 Apr 1961\nMay 1961   16 13.72786 May 1961\nJun 1961   17 14.00241 Jun 1961\nJul 1961   18 14.28246 Jul 1961\nAug 1961   19 14.56811 Aug 1961\nSep 1961   20 14.85947 Sep 1961\n\n\nLike xts, tsibble requires an explicit date-like object as an index. You can use the tsibble provided functions yearmonth, yearquarter, etc.\nNote that yearmonth and yearquarter behave differently from as.yearmon and as.yearqtr. yearmonth counts the number of months since the origin. yearquarter tracks the number of quarters since the origin.\n\nyearquarter(\"2021-10\")\n\n&lt;yearquarter[1]&gt;\n[1] \"2021 Q4\"\n# Year starts on: January\n\nas.numeric(yearquarter(\"2021-10\"))\n\n[1] 207\n\n\n\nintr_tsibble &lt;- dt %&gt;% \n  mutate(\n    x = x, \n    month = yearmonth(\"1960-01\") + 1:n()\n    ) %&gt;%\n  as_tsibble(\n    index = month\n  )\n\nintr_tsibble\n\n# A tsibble: 20 x 3 [1M]\n    tidx     x    month\n   &lt;int&gt; &lt;dbl&gt;    &lt;mth&gt;\n 1     1  10.2 1960 Feb\n 2     2  10.4 1960 Mar\n 3     3  10.6 1960 Apr\n 4     4  10.8 1960 May\n 5     5  11.0 1960 Jun\n 6     6  11.3 1960 Jul\n 7     7  11.5 1960 Aug\n 8     8  11.7 1960 Sep\n 9     9  12.0 1960 Oct\n10    10  12.2 1960 Nov\n11    11  12.4 1960 Dec\n12    12  12.7 1961 Jan\n13    13  12.9 1961 Feb\n14    14  13.2 1961 Mar\n15    15  13.5 1961 Apr\n16    16  13.7 1961 May\n17    17  14.0 1961 Jun\n18    18  14.3 1961 Jul\n19    19  14.6 1961 Aug\n20    20  14.9 1961 Sep\n\n\nThe package tsbox provides functions that can convert between these classes. You can learn more about the package here."
  },
  {
    "objectID": "intro.html#summaries",
    "href": "intro.html#summaries",
    "title": "1  Introduction",
    "section": "1.3 Summaries",
    "text": "1.3 Summaries\n\nMean\nStandard deviation"
  },
  {
    "objectID": "intro.html#why-is-time-series-analysis-different",
    "href": "intro.html#why-is-time-series-analysis-different",
    "title": "1  Introduction",
    "section": "1.4 Why is Time Series Analysis Different",
    "text": "1.4 Why is Time Series Analysis Different\n\nn &lt;- 10\nB &lt;- 5\nset.seed(21)\n\ndt_rw &lt;- tibble(\n  r = rep(1:B, n),\n  e = rnorm(n = B*n)\n) %&gt;%\n  group_by(r) %&gt;%\n  mutate(\n    t = 1:n,\n    x = cumsum(e),\n    is_first = r == 1,\n  )\n\ndt_rw %&gt;%\n  ggplot(aes(x = t, y = x, group = r, alpha = factor(is_first))) +\n  geom_line() + \n  geom_point() + \n  labs(\n    alpha = \"Observed\"\n  ) + \n  scale_x_continuous(breaks = 1:n)\n\n\n\n\n\nDefinition 1.1 (Stocahstic Process) A stochastic process in the context of time series analysis is a sequence of random variables \\(\\{x_t\\}\\) inexed by time (XXX, w!).\n\nWe view the observed time series of length \\(T\\) as a realization of \\(T\\) random variables. The observed values of the process is what we call a time series (XXX, w)."
  },
  {
    "objectID": "intro.html#introduction",
    "href": "intro.html#introduction",
    "title": "1  install.packages(c(",
    "section": "1.1 Introduction",
    "text": "1.1 Introduction\n\nSys.setlocale(\"LC_ALL\",\"en_US.utf8\")\n\nlibrary(tidyverse)\nlibrary(xts)\nlibrary(quantmod)\nlibrary(fable)\nlibrary(feasts)\nlibrary(tsibble)\nlibrary(lubridate)\nlibrary(eurostat)\nlibrary(tsbox)\n\nA time series is a sequence of values ordered by time. This course will focus on series that take values in \\(\\mathbb{R}\\). Let \\(x_1, x_2, \\ldots, x_T\\) be a sequence of values ordered by a time index \\(t = 1,\\ldots,T\\). The value of the series is determined by:\n\\[\n\\begin{align}\nx_t & = (1 + 0.02)x_{t - 1},\\quad x_0 = 10 \\implies \\\\\nx_t & = 10 \\times(1 + 0.02)^{t} \\\\\n\\end{align}\n\\tag{1.1}\\]\n\nintr_dt &lt;- tibble(\n  tidx = 1:20,\n  x = 10 *(1 + 0.02)^tidx\n)\n\nintr_dt %&gt;%\n  ggplot(aes(x = tidx, y = x)) +\n    geom_point() + \n    geom_line() + \n    scale_x_continuous(breaks = seq(1, 20, 2)) +\n    labs(\n      x = \"t\",\n      y = expression(x[t])\n    )\n\n\n\n\nThis series is an example of a deterministic sequence. For every point in time \\(t\\), you can use the formula in Equation 1.1 to compute the value of the series, e.g.:\n\\[\nx_{7} = 1.02^{7}\\times 10 \\approx 11.487\n\\]"
  },
  {
    "objectID": "intro.html#date-and-time-objects-in-r",
    "href": "intro.html#date-and-time-objects-in-r",
    "title": "1  Introduction",
    "section": "1.1 Date and Time objects in R",
    "text": "1.1 Date and Time objects in R\nInternally, dates are stored as the number of days since a (arbitrary) reference (origin). The default origin in R is the first of January 1970.\n\norigin &lt;- as.Date(\"1970-01-01\")\njan02.1970 &lt;- as.Date(\"1970-01-02\")\n\norigin\n\n[1] \"1970-01-01\"\n\njan02.1970\n\n[1] \"1970-01-02\"\n\nas.numeric(origin)\n\n[1] 0\n\nas.numeric(jan02.1970)\n\n[1] 1\n\norigin + 5\n\n[1] \"1970-01-06\"\n\norigin + 5:10\n\n[1] \"1970-01-06\" \"1970-01-07\" \"1970-01-08\" \"1970-01-09\" \"1970-01-10\"\n[6] \"1970-01-11\"\n\n\nTime is stored as the number of seconds (and fractions of a second) since the origin: 1970-01-01 00:00:00 UCT. POSIX stands for Portable Operating System Interface.\n\norigin_time &lt;- as.POSIXct(\"1970-01-01 00:00:00\", tz = \"UCT\")\nsome_other_time &lt;- as.POSIXct(\"1970-01-01 00:01:00\", tz = \"UCT\")\n\n# Print the value of origin_time\norigin_time\n\n[1] \"1970-01-01 UTC\"\n\n# Print the value of origin_time\nsome_other_time\n\n[1] \"1970-01-01 00:01:00 UTC\"\n\n# Print the numeric value of origin_time (seconds since the origin)\nas.numeric(origin_time)\n\n[1] 0\n\n# Print the numeric value of some_other_time (seconds since the origin)\nas.numeric(some_other_time)\n\n[1] 60\n\n\n\nclass(origin_time)\n\n[1] \"POSIXct\" \"POSIXt\" \n\n\nThe package lubridate provides utility functions for working with date and time objects. You can look at this online guide here.\n\n# Sys.time returns the current time\nnow &lt;- Sys.time()\n\n# Print the value of now\nnow\n\n[1] \"2023-10-10 16:57:22 EEST\"\n\n# Day of the month\nday(now)\n\n[1] 10\n\n# Day of the week (depends on the start of week assumption)\nwday(now)\n\n[1] 3\n\nwday(now, week_start = 1)\n\n[1] 2\n\n# Day of the week as string (locale dependent)\nwday(now, label = TRUE)\n\n[1] Tue\nLevels: Sun &lt; Mon &lt; Tue &lt; Wed &lt; Thu &lt; Fri &lt; Sat\n\n# Day of the year\nyday(now)\n\n[1] 283\n\n# Week of the year\nweek(now)\n\n[1] 41\n\n# Month of the year\nmonth(now)\n\n[1] 10\n\n# Quarter of the year\nquarter(now)\n\n[1] 4"
  },
  {
    "objectID": "intro.html#features-of-a-time-series",
    "href": "intro.html#features-of-a-time-series",
    "title": "1  Introduction",
    "section": "1.3 Features of a Time Series",
    "text": "1.3 Features of a Time Series\n\nTrend\nSeasonal patterns\nCyclical patterns\nNon-systematic fluctuations"
  },
  {
    "objectID": "intro.html#electricity-production-example",
    "href": "intro.html#electricity-production-example",
    "title": "1  Introduction",
    "section": "1.4 Electricity Production Example",
    "text": "1.4 Electricity Production Example\nThe dataset electr_r contains monthly values of the electricity available in the internal market (in GWh) in Bulgaria.\n\nelectr_r &lt;- read_csv(\"https://raw.githubusercontent.com/feb-sofia/ts2023/main/data/electricity/bg_internal_consumption.csv\") %&gt;%\n  mutate(\n    electr = as.numeric(electr)\n  ) %&gt;%\n  filter(!is.na(electr)) %&gt;%\n  rename(\n    GWh = electr\n  )\n\n\n# Returns the first rows so that we can get an idea about\n# the contents of the tibble (data table).\n\nhead(electr_r)\n\n# A tibble: 6 × 2\n  month     GWh\n  &lt;chr&gt;   &lt;dbl&gt;\n1 2008-01  3808\n2 2008-02  3281\n3 2008-03  2923\n4 2008-04  2593\n5 2008-05  2449\n6 2008-06  2393\n\n\nThe raw data electr_r contains a column called month that shows the month to which the value in GHw refers. The month column is character (chr) and is not in a format we can use as a time index. We need to parse the text to get a numeric representation of the month. This is what the yearmonth function does (for monthly measurements).\n\nelectr &lt;- electr_r %&gt;%\n  mutate(\n    # Create a new column called ym that holds the numeric \n    # time index\n    ym = yearmonth(month)\n  ) %&gt;%\n  as_tsibble(\n    # This assigns the newly created column ym as the time index\n    index = ym\n  )\n\n\nelectr %&gt;%\n  autoplot(GWh) + \n  labs(\n    x = \"Month\"\n  )\n\n\n\n\nAn advantage of the tsibble objects is that you can use familiar verbs, for example:\n\nmutate: to create new columns or modify existing ones\nselect: to select a subset of columns\nfilter: to select a subset of rows\n\nFor more information, check the documentation here.\n\n# Examples for creating new columns with mutate\n\nelectr1 &lt;- electr %&gt;%\n  mutate(\n    GWh_centered = GWh - mean(GWh),\n    GWh_log = log(GWh),\n  ) %&gt;%\n  select(-GWh)\n\nYou can also use the mean, sd, summary, etc. by selecting the columns from the tsibble using the $ syntax.\n\nelectr$GWh\n\n  [1] 3808 3281 2923 2593 2449 2393 2540 2560 2480 2695 3000 3320 3627 3098 3122\n [16] 2436 2311 2292 2461 2406 2304 2617 2813 3253 3496 3074 3041 2460 2303 2291\n [31] 2401 2495 2212 2721 2545 3219 3541 3176 3174 2502 2297 2363 2499 2480 2353\n [46] 2748 3161 3316 3619 3636 3121 2444 2368 2389 2602 2515 2285 2419 2781 3394\n [61] 3495 3066 3144 2639 2267 2331 2455 2455 2308 2599 2759 3378 3346 2898 2799\n [76] 2560 2431 2370 2501 2488 2375 2665 2966 3273 3491 3048 3104 2579 2306 2307\n [91] 2611 2534 2395 2631 2693 3076 3633 2872 2896 2373 2384 2381 2548 2516 2410\n[106] 2701 2933 3507 3515 2847 2618 2400 2232 2201 2393 2398 2262 2438 2683 2904\n[121] 3103 2802 2785 2037 2154 2211 2317 2361 2235 2414 2737 3216 3327 2806 2649\n[136] 2476 2350 2320 2464 2449 2283 2387 2565\n\n\n\nmean(electr$GWh)\n\n[1] 2706.706\n\n\n\nsummary(electr$GWh)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   2037    2393    2560    2707    3020    3808 \n\n\n\nelectr %&gt;%\n  gg_season() + \n  labs(\n    x = \"Month\",\n    colour = \"Year\"\n  )\n\nPlot variable not specified, automatically selected `y = GWh`\n\n\n\n\n\n\nelectr %&gt;%\n  gg_subseries() + \n  labs(\n    x = \"Year\"\n  )\n\nPlot variable not specified, automatically selected `y = GWh`\n\n\n\n\n\nBoth tsibble and xts objects support convenient filtering by the time index. You can check the syntax of both packages here:\n\nxts cheatsheet\ntsibble filter_index\n\n\nelectr %&gt;%\n  filter_index(\"2008-01\"~\"2008-12\")\n\n# A tsibble: 12 x 3 [1M]\n   month     GWh       ym\n   &lt;chr&gt;   &lt;dbl&gt;    &lt;mth&gt;\n 1 2008-01  3808 2008 Jan\n 2 2008-02  3281 2008 Feb\n 3 2008-03  2923 2008 Mar\n 4 2008-04  2593 2008 Apr\n 5 2008-05  2449 2008 May\n 6 2008-06  2393 2008 Jun\n 7 2008-07  2540 2008 Jul\n 8 2008-08  2560 2008 Aug\n 9 2008-09  2480 2008 Sep\n10 2008-10  2695 2008 Oct\n11 2008-11  3000 2008 Nov\n12 2008-12  3320 2008 Dec\n\n\n\nelectr %&gt;%\n  filter_index(\"2008-01\"~\"2008-12\") %&gt;%\n  as_tibble() %&gt;%\n  summarise(\n    mean = mean(GWh)\n  )\n\n# A tibble: 1 × 1\n   mean\n  &lt;dbl&gt;\n1 2837.\n\n\nYou can use index_by and summarise to change the frequency of the data, i.e., to collapse the time series (e.g., from daily to monthly, from monthly to annual, etc.).\n\nelectr %&gt;%\n  index_by(qrt = ~ yearquarter(.)) %&gt;%\n  summarise(\n    GWh = sum(GWh)\n  ) %&gt;%\n  autoplot(GWh)"
  },
  {
    "objectID": "intro.html#bitcoin-exchange-rate-example",
    "href": "intro.html#bitcoin-exchange-rate-example",
    "title": "1  Introduction",
    "section": "1.5 Bitcoin Exchange Rate Example",
    "text": "1.5 Bitcoin Exchange Rate Example\n\nbitcoin &lt;- getSymbols(\n  \"BTC-USD\", \n  from=\"2015-01-01\",\n  src=\"yahoo\", \n  periodicity=\"daily\", \n  env = NULL)\n\nnames(bitcoin) &lt;- c(\"Open\", \"High\", \"Low\", \"Close\", \"Volume\", \"Adjusted\")\n\n\nbc &lt;- bitcoin %&gt;%\n  ts_tsibble() %&gt;%\n  pivot_wider(\n    names_from = id,\n    values_from = value\n  )\n\n\nbc %&gt;%\n  autoplot(Close) + \n  labs(\n    x = \"Date\",\n    y = \"USD/BTC\"\n  )\n\n\n\n\n\nbc %&gt;%\n  gg_season(period = \"month\")\n\nPlot variable not specified, automatically selected `y = Adjusted`"
  },
  {
    "objectID": "intro.html#exercise",
    "href": "intro.html#exercise",
    "title": "1  Introduction",
    "section": "1.6 Exercise",
    "text": "1.6 Exercise\nThe following chunk uses the eurostat package to download quarterly, seasonally unadjusted series in constant 2015 prices for the Bulgarian GDP between 1995 and 2023.\n\ngdp_q &lt;- get_eurostat(\n  \"namq_10_gdp\",\n  filters = list(\n    geo=\"BG\",\n    na_item = \"B1GQ\",\n    unit = \"CLV_I15\",\n    s_adj = \"NSA\"\n  ),\n  cache = FALSE,\n  type = \"code\"\n) %&gt;%\n  filter(!is.na(values)) %&gt;%\n  mutate(\n    time = str_replace(time, \"-\", \" \"),\n    values = as.numeric(values)\n  )\n\n\nCreate a tsibble object to hold the time series. Hint: Use the as_tsibble and yearquarter functions from the tsibble package.\nWhat is the unit of measurement: EUR or BGN? Take a look at the values and make a guess.\nWhat are the dates of the first and the last observations?\nWhat is the average quarterly GDP over the whole period.\nCompute the average GDP by quarter.\nCreate a series of annual GDP measurements by summing the values of the quarterly GDP in each year. Hint: use index_by and summarise.\nIs there a seasonal pattern in the data? Create a seasonal plot using the gg_season function from the tsibble package. Which quarter tends to have the lowest GDP?\nIs there a trend visible in the data?\nCompute the average quarterly GDP between before 2009 and after (and including) 2009."
  },
  {
    "objectID": "01-Introduction.html#date-and-time-objects-in-r",
    "href": "01-Introduction.html#date-and-time-objects-in-r",
    "title": "1  Introduction",
    "section": "1.1 Date and Time objects in R",
    "text": "1.1 Date and Time objects in R\nInternally, dates are stored as the number of days since a (arbitrary) reference (origin). The default origin in R is the first of January 1970.\n\norigin &lt;- as.Date(\"1970-01-01\")\njan02.1970 &lt;- as.Date(\"1970-01-02\")\n\norigin\n\n[1] \"1970-01-01\"\n\njan02.1970\n\n[1] \"1970-01-02\"\n\nas.numeric(origin)\n\n[1] 0\n\nas.numeric(jan02.1970)\n\n[1] 1\n\norigin + 5\n\n[1] \"1970-01-06\"\n\norigin + 5:10\n\n[1] \"1970-01-06\" \"1970-01-07\" \"1970-01-08\" \"1970-01-09\" \"1970-01-10\"\n[6] \"1970-01-11\"\n\n\nTime is stored as the number of seconds (and fractions of a second) since the origin: 1970-01-01 00:00:00 UCT. POSIX stands for Portable Operating System Interface.\n\norigin_time &lt;- as.POSIXct(\"1970-01-01 00:00:00\", tz = \"UCT\")\nsome_other_time &lt;- as.POSIXct(\"1970-01-01 00:01:00\", tz = \"UCT\")\n\n# Print the value of origin_time\norigin_time\n\n[1] \"1970-01-01 UTC\"\n\n# Print the value of origin_time\nsome_other_time\n\n[1] \"1970-01-01 00:01:00 UTC\"\n\n# Print the numeric value of origin_time (seconds since the origin)\nas.numeric(origin_time)\n\n[1] 0\n\n# Print the numeric value of some_other_time (seconds since the origin)\nas.numeric(some_other_time)\n\n[1] 60\n\n\n\nclass(origin_time)\n\n[1] \"POSIXct\" \"POSIXt\" \n\n\nThe package lubridate provides utility functions for working with date and time objects. You can look at this online guide here.\n\n# Sys.time returns the current time\nnow &lt;- Sys.time()\n\n# Print the value of now\nnow\n\n[1] \"2023-10-10 17:00:10 EEST\"\n\n# Day of the month\nday(now)\n\n[1] 10\n\n# Day of the week (depends on the start of week assumption)\nwday(now)\n\n[1] 3\n\nwday(now, week_start = 1)\n\n[1] 2\n\n# Day of the week as string (locale dependent)\nwday(now, label = TRUE)\n\n[1] Tue\nLevels: Sun &lt; Mon &lt; Tue &lt; Wed &lt; Thu &lt; Fri &lt; Sat\n\n# Day of the year\nyday(now)\n\n[1] 283\n\n# Week of the year\nweek(now)\n\n[1] 41\n\n# Month of the year\nmonth(now)\n\n[1] 10\n\n# Quarter of the year\nquarter(now)\n\n[1] 4"
  },
  {
    "objectID": "01-Introduction.html#time-series-objects",
    "href": "01-Introduction.html#time-series-objects",
    "title": "1  Introduction",
    "section": "1.2 Time series objects",
    "text": "1.2 Time series objects\nThere are several classes that are used for storing time series in R. We will mainly focus on tsibble, but some functions we will encounter later in the course return or require ts or xts objects.\n\nts\nxts (see the xts vignette)\ntsibble (see the introduction to tsibble)\n\n\n1.2.1 Creating ts Objects\n\nts(dt$x, start = 1960, frequency = 12)\n\n          Jan      Feb      Mar      Apr      May      Jun      Jul      Aug\n1960 10.20000 10.40400 10.61208 10.82432 11.04081 11.26162 11.48686 11.71659\n1961 12.93607 13.19479 13.45868 13.72786 14.00241 14.28246 14.56811 14.85947\n          Sep      Oct      Nov      Dec\n1960 11.95093 12.18994 12.43374 12.68242\n1961                                    \n\n\n\nts(dt$x, start = 1960, frequency = 4)\n\n         Qtr1     Qtr2     Qtr3     Qtr4\n1960 10.20000 10.40400 10.61208 10.82432\n1961 11.04081 11.26162 11.48686 11.71659\n1962 11.95093 12.18994 12.43374 12.68242\n1963 12.93607 13.19479 13.45868 13.72786\n1964 14.00241 14.28246 14.56811 14.85947\n\n\n\nts(dt$x, start = 1960, frequency = 1)\n\nTime Series:\nStart = 1960 \nEnd = 1979 \nFrequency = 1 \n [1] 10.20000 10.40400 10.61208 10.82432 11.04081 11.26162 11.48686 11.71659\n [9] 11.95093 12.18994 12.43374 12.68242 12.93607 13.19479 13.45868 13.72786\n[17] 14.00241 14.28246 14.56811 14.85947\n\n\n\n\n1.2.2 Creating xts Objects\nUnlike ts, xts requires an explicit time index in the form of date-like objects:\n\nyearmon (package zoo)\nyearqtr (package zoo)\nDate\nPOSIX\n\n\n# Here, we arbitrarily choose monthly measurements \n# to demonstrate the construction of xts objects\n\n# First, we construct a time index: the months from Feb 1960 to Sep 1961 by using the as.yearmon function. Note that yearmon stores a month as the year plus a fraction\n\nas.yearmon(\"1960-01\")\n\n[1] \"Jan 1960\"\n\nas.yearmon(\"1960-02\")\n\n[1] \"Feb 1960\"\n\nas.yearmon(\"1960-03\")\n\n[1] \"Mar 1960\"\n\nas.yearmon(\"1960-01\") + 1:20 / 12\n\n [1] \"Feb 1960\" \"Mar 1960\" \"Apr 1960\" \"May 1960\" \"Jun 1960\" \"Jul 1960\"\n [7] \"Aug 1960\" \"Sep 1960\" \"Oct 1960\" \"Nov 1960\" \"Dec 1960\" \"Jan 1961\"\n[13] \"Feb 1961\" \"Mar 1961\" \"Apr 1961\" \"May 1961\" \"Jun 1961\" \"Jul 1961\"\n[19] \"Aug 1961\" \"Sep 1961\"\n\ndt &lt;- dt %&gt;%\n  mutate(\n    # n() counts the number of rows in the table,\n    month = as.yearmon(\"1960-01\") + 1:n() / 12\n  )\n\nets_ex &lt;- xts(\n  dt, \n  order.by = dt$month\n)\n\nets_ex\n\n         tidx        x    month\nFeb 1960    1 10.20000 Feb 1960\nMar 1960    2 10.40400 Mar 1960\nApr 1960    3 10.61208 Apr 1960\nMay 1960    4 10.82432 May 1960\nJun 1960    5 11.04081 Jun 1960\nJul 1960    6 11.26162 Jul 1960\nAug 1960    7 11.48686 Aug 1960\nSep 1960    8 11.71659 Sep 1960\nOct 1960    9 11.95093 Oct 1960\nNov 1960   10 12.18994 Nov 1960\nDec 1960   11 12.43374 Dec 1960\nJan 1961   12 12.68242 Jan 1961\nFeb 1961   13 12.93607 Feb 1961\nMar 1961   14 13.19479 Mar 1961\nApr 1961   15 13.45868 Apr 1961\nMay 1961   16 13.72786 May 1961\nJun 1961   17 14.00241 Jun 1961\nJul 1961   18 14.28246 Jul 1961\nAug 1961   19 14.56811 Aug 1961\nSep 1961   20 14.85947 Sep 1961\n\n\nLike xts, tsibble requires an explicit date-like object as an index. You can use the tsibble provided functions yearmonth, yearquarter, etc.\nNote that yearmonth and yearquarter behave differently from as.yearmon and as.yearqtr. yearmonth counts the number of months since the origin. yearquarter tracks the number of quarters since the origin.\n\nyearquarter(\"2021-10\")\n\n&lt;yearquarter[1]&gt;\n[1] \"2021 Q4\"\n# Year starts on: January\n\nas.numeric(yearquarter(\"2021-10\"))\n\n[1] 207\n\n\n\nintr_tsibble &lt;- dt %&gt;% \n  mutate(\n    x = x, \n    month = yearmonth(\"1960-01\") + 1:n()\n    ) %&gt;%\n  as_tsibble(\n    index = month\n  )\n\nintr_tsibble\n\n# A tsibble: 20 x 3 [1M]\n    tidx     x    month\n   &lt;int&gt; &lt;dbl&gt;    &lt;mth&gt;\n 1     1  10.2 1960 Feb\n 2     2  10.4 1960 Mar\n 3     3  10.6 1960 Apr\n 4     4  10.8 1960 May\n 5     5  11.0 1960 Jun\n 6     6  11.3 1960 Jul\n 7     7  11.5 1960 Aug\n 8     8  11.7 1960 Sep\n 9     9  12.0 1960 Oct\n10    10  12.2 1960 Nov\n11    11  12.4 1960 Dec\n12    12  12.7 1961 Jan\n13    13  12.9 1961 Feb\n14    14  13.2 1961 Mar\n15    15  13.5 1961 Apr\n16    16  13.7 1961 May\n17    17  14.0 1961 Jun\n18    18  14.3 1961 Jul\n19    19  14.6 1961 Aug\n20    20  14.9 1961 Sep\n\n\nThe package tsbox provides functions that can convert between these classes. You can learn more about the package here."
  },
  {
    "objectID": "01-Introduction.html#features-of-a-time-series",
    "href": "01-Introduction.html#features-of-a-time-series",
    "title": "1  Introduction",
    "section": "1.3 Features of a Time Series",
    "text": "1.3 Features of a Time Series\n\nTrend\nSeasonal patterns\nCyclical patterns\nNon-systematic fluctuations"
  },
  {
    "objectID": "01-Introduction.html#electricity-production-example",
    "href": "01-Introduction.html#electricity-production-example",
    "title": "1  Introduction",
    "section": "1.4 Electricity Production Example",
    "text": "1.4 Electricity Production Example\nThe dataset electr_r contains monthly values of the electricity available in the internal market (in GWh) in Bulgaria.\n\nelectr_r &lt;- read_csv(\"https://raw.githubusercontent.com/feb-sofia/ts2023/main/data/electricity/bg_internal_consumption.csv\") %&gt;%\n  mutate(\n    electr = as.numeric(electr)\n  ) %&gt;%\n  filter(!is.na(electr)) %&gt;%\n  rename(\n    GWh = electr\n  )\n\n\n# Returns the first rows so that we can get an idea about\n# the contents of the tibble (data table).\n\nhead(electr_r)\n\n# A tibble: 6 × 2\n  month     GWh\n  &lt;chr&gt;   &lt;dbl&gt;\n1 2008-01  3808\n2 2008-02  3281\n3 2008-03  2923\n4 2008-04  2593\n5 2008-05  2449\n6 2008-06  2393\n\n\nThe raw data electr_r contains a column called month that shows the month to which the value in GHw refers. The month column is character (chr) and is not in a format we can use as a time index. We need to parse the text to get a numeric representation of the month. This is what the yearmonth function does (for monthly measurements).\n\nelectr &lt;- electr_r %&gt;%\n  mutate(\n    # Create a new column called ym that holds the numeric \n    # time index\n    ym = yearmonth(month)\n  ) %&gt;%\n  as_tsibble(\n    # This assigns the newly created column ym as the time index\n    index = ym\n  )\n\n\nelectr %&gt;%\n  autoplot(GWh) + \n  labs(\n    x = \"Month\"\n  )\n\n\n\n\nAn advantage of the tsibble objects is that you can use familiar verbs, for example:\n\nmutate: to create new columns or modify existing ones\nselect: to select a subset of columns\nfilter: to select a subset of rows\n\nFor more information, check the documentation here.\n\n# Examples for creating new columns with mutate\n\nelectr1 &lt;- electr %&gt;%\n  mutate(\n    GWh_centered = GWh - mean(GWh),\n    GWh_log = log(GWh),\n  ) %&gt;%\n  select(-GWh)\n\nYou can also use the mean, sd, summary, etc. by selecting the columns from the tsibble using the $ syntax.\n\nelectr$GWh\n\n  [1] 3808 3281 2923 2593 2449 2393 2540 2560 2480 2695 3000 3320 3627 3098 3122\n [16] 2436 2311 2292 2461 2406 2304 2617 2813 3253 3496 3074 3041 2460 2303 2291\n [31] 2401 2495 2212 2721 2545 3219 3541 3176 3174 2502 2297 2363 2499 2480 2353\n [46] 2748 3161 3316 3619 3636 3121 2444 2368 2389 2602 2515 2285 2419 2781 3394\n [61] 3495 3066 3144 2639 2267 2331 2455 2455 2308 2599 2759 3378 3346 2898 2799\n [76] 2560 2431 2370 2501 2488 2375 2665 2966 3273 3491 3048 3104 2579 2306 2307\n [91] 2611 2534 2395 2631 2693 3076 3633 2872 2896 2373 2384 2381 2548 2516 2410\n[106] 2701 2933 3507 3515 2847 2618 2400 2232 2201 2393 2398 2262 2438 2683 2904\n[121] 3103 2802 2785 2037 2154 2211 2317 2361 2235 2414 2737 3216 3327 2806 2649\n[136] 2476 2350 2320 2464 2449 2283 2387 2565\n\n\n\n# Compute the arithmetic average of the values\n# in the GWh column of the data set electr\n\nmean(electr$GWh)\n\n[1] 2706.706\n\n\n\nsummary(electr$GWh)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   2037    2393    2560    2707    3020    3808 \n\n\n\nelectr %&gt;%\n  gg_season() + \n  labs(\n    x = \"Month\",\n    colour = \"Year\"\n  )\n\nPlot variable not specified, automatically selected `y = GWh`\n\n\n\n\n\n\nelectr %&gt;%\n  gg_subseries() + \n  labs(\n    x = \"Year\"\n  )\n\nPlot variable not specified, automatically selected `y = GWh`\n\n\n\n\n\nBoth tsibble and xts objects support convenient filtering by the time index. You can check the syntax of both packages here:\n\nxts cheatsheet\ntsibble filter_index\n\n\nelectr %&gt;%\n  filter_index(\"2008-01\"~\"2008-12\")\n\n# A tsibble: 12 x 3 [1M]\n   month     GWh       ym\n   &lt;chr&gt;   &lt;dbl&gt;    &lt;mth&gt;\n 1 2008-01  3808 2008 Jan\n 2 2008-02  3281 2008 Feb\n 3 2008-03  2923 2008 Mar\n 4 2008-04  2593 2008 Apr\n 5 2008-05  2449 2008 May\n 6 2008-06  2393 2008 Jun\n 7 2008-07  2540 2008 Jul\n 8 2008-08  2560 2008 Aug\n 9 2008-09  2480 2008 Sep\n10 2008-10  2695 2008 Oct\n11 2008-11  3000 2008 Nov\n12 2008-12  3320 2008 Dec\n\n\n\nelectr %&gt;%\n  filter_index(\"2008-01\"~\"2008-12\") %&gt;%\n  as_tibble() %&gt;%\n  summarise(\n    mean = mean(GWh)\n  )\n\n# A tibble: 1 × 1\n   mean\n  &lt;dbl&gt;\n1 2837.\n\n\nYou can use index_by and summarise to change the frequency of the data, i.e., to collapse the time series (e.g., from daily to monthly, from monthly to annual, etc.).\n\nelectr %&gt;%\n  index_by(qrt = ~ yearquarter(.)) %&gt;%\n  summarise(\n    GWh = sum(GWh)\n  ) %&gt;%\n  autoplot(GWh)"
  },
  {
    "objectID": "01-Introduction.html#bitcoin-exchange-rate-example",
    "href": "01-Introduction.html#bitcoin-exchange-rate-example",
    "title": "1  Introduction",
    "section": "1.5 Bitcoin Exchange Rate Example",
    "text": "1.5 Bitcoin Exchange Rate Example\n\nbitcoin &lt;- getSymbols(\n  \"BTC-USD\", \n  from=\"2015-01-01\",\n  src=\"yahoo\", \n  periodicity=\"daily\", \n  env = NULL)\n\nnames(bitcoin) &lt;- c(\"Open\", \"High\", \"Low\", \"Close\", \"Volume\", \"Adjusted\")\n\n\nbc &lt;- bitcoin %&gt;%\n  ts_tsibble() %&gt;%\n  pivot_wider(\n    names_from = id,\n    values_from = value\n  )\n\n\nbc %&gt;%\n  autoplot(Close) + \n  labs(\n    x = \"Date\",\n    y = \"USD/BTC\"\n  )\n\n\n\n\n\nbc %&gt;%\n  gg_season(period = \"month\")\n\nPlot variable not specified, automatically selected `y = Adjusted`"
  },
  {
    "objectID": "01-Introduction.html#exercise",
    "href": "01-Introduction.html#exercise",
    "title": "1  Introduction",
    "section": "1.6 Exercise",
    "text": "1.6 Exercise\nThe following chunk uses the eurostat package to download quarterly, seasonally unadjusted series in constant 2015 prices for the Bulgarian GDP between 1995 and 2023.\n\ngdp_q &lt;- get_eurostat(\n  \"namq_10_gdp\",\n  filters = list(\n    geo=\"BG\",\n    na_item = \"B1GQ\",\n    unit = \"CLV_I15\",\n    s_adj = \"NSA\"\n  ),\n  cache = FALSE,\n  type = \"code\"\n) %&gt;%\n  filter(!is.na(values)) %&gt;%\n  mutate(\n    time = str_replace(time, \"-\", \" \"),\n    values = as.numeric(values)\n  )\n\n\nCreate a tsibble object to hold the time series. Hint: Use the as_tsibble and yearquarter functions from the tsibble package.\nWhat is the unit of measurement: EUR or BGN? Take a look at the values and make a guess.\nWhat are the dates of the first and the last observations?\nWhat is the average quarterly GDP over the whole period.\nCompute the average GDP by quarter.\nCreate a series of annual GDP measurements by summing the values of the quarterly GDP in each year. Hint: use index_by and summarise.\nIs there a seasonal pattern in the data? Create a seasonal plot using the gg_season function from the tsibble package. Which quarter tends to have the lowest GDP?\nIs there a trend visible in the data?\nCompute the average quarterly GDP between before 2009 and after (and including) 2009."
  }
]